<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Yunita & Mirsyad - Wedding Invitation</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="landing.css" />
  </head>
  <body>
    <!-- Floating particles -->
    <div class="particles">
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
      <div class="particle"></div>
    </div>


    <!-- Main container -->
    <div class="container">
      <div class="invitation-card">
        <div class="invitation-title">Wedding Invitation</div>

        <div class="heart-icon">
          <i class="fas fa-heart"></i>
        </div>

        <h1 class="couple-names">
          Yunita <span class="ampersand">&</span> Mirsyad
        </h1>

        <div class="wedding-date">
          <i class="fas fa-calendar-heart"></i>
          15 September 2024
        </div>

        <p class="invitation-text">
          Dengan penuh kebahagiaan, kami mengundang Anda untuk hadir dalam momen
          sakral pernikahan kami. Kehadiran dan doa Anda adalah anugerah
          terindah bagi kami.
        </p>

        <button class="open-invitation-btn" onclick="openInvitation()">
          <i class="fas fa-envelope-open"></i>
          Buka Undangan
        </button>

        <div class="guest-name" id="guestName">
          <i class="fas fa-users"></i> Kepada Yth:
          <strong>Keluarga & Sahabat Terkasih</strong>
        </div>
      </div>
    </div>

    <!-- Loading overlay -->
    <div class="loading-overlay" id="loadingOverlay">
      <div class="loading-content">
        <div class="loader"></div>
        <p>Memuat undangan...</p>
      </div>
    </div>

    <script>
      // Initialize page
      document.addEventListener("DOMContentLoaded", function () {
        getGuestName();
        console.log("Landing page loaded successfully");
      });

      // Get guest name from URL
      function getGuestName() {
        try {
          const urlParams = new URLSearchParams(window.location.search);
          const guestName = urlParams.get("to");

          if (guestName) {
            const decodedName = decodeURIComponent(
              guestName.replace(/\+/g, " ")
            );
            document.getElementById("guestName").innerHTML = `
                        <i class="fas fa-user"></i> Kepada Yth: <strong>${decodedName}</strong>
                    `;
          }
        } catch (error) {
          console.log("Error getting guest name:", error);
        }
      }

      // Alternative redirect methods for different file structures
      function openInvitation() {
        try {
          const loadingOverlay = document.getElementById("loadingOverlay");
          loadingOverlay.classList.add("active");

          // Play sound effect
          playOpenSound();

          // Get guest name for passing to main invitation
          const urlParams = new URLSearchParams(window.location.search);
          const guestName = urlParams.get("to");

          setTimeout(() => {
            // Multiple redirect options - choose based on your file structure:

            // Option 1: If main invitation is in same folder
            let redirectUrl = "wedding-invitation.html";

            // Option 2: If you want to use the artifact directly (for testing)
            // Just replace with the actual HTML file path
            // redirectUrl = 'main-invitation.html';

            // Option 3: If in different folder
            // redirectUrl = '../invitation/index.html';

            // Add guest parameter if available
            if (guestName) {
              redirectUrl +=
                (redirectUrl.includes("?") ? "&" : "?") +
                "guest=" +
                encodeURIComponent(guestName);
            }

            // Redirect to main invitation
            window.location.href = redirectUrl;
          }, 2000);
        } catch (error) {
          console.log("Error opening invitation:", error);
          loadingOverlay.classList.remove("active");
          alert("Terjadi kesalahan. Silakan coba lagi.");
        }
      }

      // Show success message
      function showSuccessMessage() {
        const card = document.querySelector(".invitation-card");
        card.innerHTML = `
                <div style="padding: 2rem; text-align: center;">
                    <div style="font-size: 3rem; color: #4CAF50; margin-bottom: 1rem;">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h2 style="margin-bottom: 1rem;">Undangan Berhasil Dibuka!</h2>
                    <p style="opacity: 0.8; margin-bottom: 2rem;">
                        Terima kasih telah mengunjungi undangan pernikahan kami. 
                        Dalam implementasi sesungguhnya, halaman ini akan redirect 
                        ke website undangan utama.
                    </p>
                    <button onclick="location.reload()" style="
                        background: linear-gradient(45deg, #4CAF50, #45a049);
                        border: none;
                        color: white;
                        padding: 1rem 2rem;
                        border-radius: 25px;
                        cursor: pointer;
                        font-size: 1rem;
                        transition: all 0.3s ease;
                    ">
                        <i class="fas fa-redo"></i> Kembali
                    </button>
                </div>
            `;
      }

      // Play sound effect
      function playOpenSound() {
        try {
          // Simple beep sound using Web Audio API
          const audioContext = new (window.AudioContext ||
            window.webkitAudioContext)();
          const oscillator = audioContext.createOscillator();
          const gainNode = audioContext.createGain();

          oscillator.connect(gainNode);
          gainNode.connect(audioContext.destination);

          oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
          oscillator.frequency.exponentialRampToValueAtTime(
            400,
            audioContext.currentTime + 0.3
          );

          gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
          gainNode.gain.exponentialRampToValueAtTime(
            0.01,
            audioContext.currentTime + 0.3
          );

          oscillator.type = "sine";
          oscillator.start(audioContext.currentTime);
          oscillator.stop(audioContext.currentTime + 0.3);
        } catch (error) {
          console.log("Audio not available:", error);
        }
      }

      // Music toggle
      let isPlaying = false;
      function toggleMusic() {
        const btn = document.getElementById("musicBtn");
        const icon = document.getElementById("musicIcon");

        if (isPlaying) {
          btn.classList.remove("playing");
          icon.className = "fas fa-music";
          isPlaying = false;
        } else {
          btn.classList.add("playing");
          icon.className = "fas fa-pause";
          isPlaying = true;
        }
      }

      // Keyboard shortcuts
      document.addEventListener("keydown", function (e) {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          openInvitation();
        }
      });

      // Error handling
      window.addEventListener("error", function (e) {
        console.log("JavaScript error caught:", e.error);
      });

      console.log("Wedding invitation landing page initialized");
    </script>
  </body>
</html>
