<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Yunita & Mirsyad - Wedding Invitation</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <audio id="bg-music" src="backsound.mp3" preload="auto" loop></audio>
    <!-- Hero Section -->
    <section class="hero" id="home">
      <div class="hero-content">
        <h1>Yunita & Mirsyad</h1>
        <p class="subtitle">Merayakan Cinta dalam Ikatan Suci Pernikahan</p>
        <p class="date">15 September 2024</p>
      </div>
    </section>

    <!-- Couple Section -->
    <section class="section" id="couple">
      <div class="container">
        <h2 class="section-title fade-in">Pasangan Bahagia</h2>
        <div class="couple-grid">
          <div class="couple-card fade-in">
            <div class="couple-photo bride">
              <img src="wanita.jpg" alt="Foto Yunita" class="photo-img" />
            </div>
            <h3 class="couple-name">Yunita Satriyo</h3>
            <p class="couple-desc">
              Putri dari Bapak Ahmad Satriyo & Ibu Siti Aminah<br />
              "Cinta adalah kebahagiaan yang ditemukan dalam kebersamaan"
            </p>
          </div>
          <div class="couple-card fade-in">
            <div class="couple-photo groom">
              <img src="pria.jpg" alt="Foto Mirsyad" class="photo-img" />
            </div>
            <h3 class="couple-name">Mirsyad Family</h3>
            <p class="couple-desc">
              Putra dari keluarga yang penuh kasih sayang<br />
              "Bersama kita wujudkan impian indah berkeluarga"
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Events Section -->
    <section class="section" id="events">
      <div class="container">
        <h2 class="section-title fade-in">Detail Acara</h2>
        <div class="event-grid">
          <div class="event-card fade-in">
            <div class="event-icon">
              <i class="fas fa-ring"></i>
            </div>
            <h3 class="event-title">Akad Nikah</h3>
            <div class="event-details">
              <p><i class="fas fa-calendar"></i> Sabtu, 15 September 2024</p>
              <p><i class="fas fa-clock"></i> 08:00 - 10:00 WIB</p>
            </div>
            <div class="event-location">
              <i class="fas fa-map-marker-alt"></i>
              Masjid Al-Ikhlas<br />
              Jl. Merdeka No. 123, Jakarta
            </div>
            <button
              class="submit-btn"
              onclick="openMaps('Masjid Al-Ikhlas Jakarta')"
            >
              <i class="fas fa-directions"></i> Buka Maps
            </button>
          </div>
          <div class="event-card fade-in">
            <div class="event-icon">
              <i class="fas fa-glass-cheers"></i>
            </div>
            <h3 class="event-title">Resepsi</h3>
            <div class="event-details">
              <p><i class="fas fa-calendar"></i> Sabtu, 15 September 2024</p>
              <p><i class="fas fa-clock"></i> 11:00 - 15:00 WIB</p>
            </div>
            <div class="event-location">
              <i class="fas fa-map-marker-alt"></i>
              Gedung Serbaguna Merdeka<br />
              Jl. Kemerdekaan No. 456, Jakarta
            </div>
            <button
              class="submit-btn"
              onclick="openMaps('Gedung Serbaguna Merdeka Jakarta')"
            >
              <i class="fas fa-directions"></i> Buka Maps
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Countdown Section -->
    <section class="countdown">
      <div class="container">
        <h2 class="section-title" style="color: white">Menuju Hari Bahagia</h2>
        <div class="countdown-timer" id="countdown">
          <div class="time-box">
            <span class="time-number" id="days">00</span>
            <span class="time-label">Hari</span>
          </div>
          <div class="time-box">
            <span class="time-number" id="hours">00</span>
            <span class="time-label">Jam</span>
          </div>
          <div class="time-box">
            <span class="time-number" id="minutes">00</span>
            <span class="time-label">Menit</span>
          </div>
          <div class="time-box">
            <span class="time-number" id="seconds">00</span>
            <span class="time-label">Detik</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Gallery Section -->
    <section class="section" id="gallery">
      <div class="container">
        <h2 class="section-title fade-in">Galeri Cinta</h2>
        <div class="gallery-grid">
          <div class="gallery-item fade-in loading-placeholder">
            <img
              src="https://i.pinimg.com/736x/9c/b5/45/9cb545ac1a1a8301da3655f83cf7c88a.jpg"
              alt="Gambar 1"
            />
          </div>
          <div class="gallery-item fade-in loading-placeholder">
            <img
              src="https://i.pinimg.com/736x/f5/87/4a/f5874abf1f666616d13f03b0aa785a23.jpg"
              alt="Gambar 2"
            />
          </div>
          <div class="gallery-item fade-in loading-placeholder">
            <img
              src="https://i.pinimg.com/736x/46/ce/75/46ce753e97bd9c5d87cfb8575b6c2586.jpg"
              alt="Gambar 3"
            />
          </div>
          <div class="gallery-item fade-in loading-placeholder">
            <img
              src="https://i.pinimg.com/736x/5a/6a/45/5a6a45937a153701ac31694b739bb4a0.jpg"
              alt="Gambar 4"
            />
          </div>
          <div class="gallery-item fade-in loading-placeholder">
            <img
              src="https://i.pinimg.com/736x/8d/bb/82/8dbb8216c54df1da82c3b216b7761340.jpg"
              alt="Gambar 5"
            />
          </div>
          <div class="gallery-item fade-in loading-placeholder">
            <img
              src="https://i.pinimg.com/736x/02/b7/19/02b7194b249bb3b87ff186ee413da8dd.jpg"
              alt="Gambar 6"
            />
          </div>
        </div>
      </div>
    </section>

    <!-- RSVP Section -->
    <section class="section" id="rsvp">
      <div class="container">
        <h2 class="section-title fade-in">Konfirmasi Kehadiran</h2>
        <form class="rsvp-form fade-in" id="rsvpForm">
          <div class="form-group">
            <label for="name">Nama Lengkap</label>
            <input type="text" id="name" name="name" required />
          </div>
          <div class="form-group">
            <label for="attendance">Kehadiran</label>
            <select id="attendance" name="attendance" required>
              <option value="">Pilih...</option>
              <option value="hadir">Hadir</option>
              <option value="tidak-hadir">Tidak Hadir</option>
            </select>
          </div>
          <div class="form-group">
            <label for="guests">Jumlah Tamu</label>
            <input
              type="number"
              id="guests"
              name="guests"
              min="1"
              max="5"
              value="1"
            />
          </div>
          <div class="form-group">
            <label for="message">Ucapan & Doa</label>
            <textarea
              id="message"
              name="message"
              rows="4"
              placeholder="Berikan ucapan dan doa terbaik untuk kami..."
            ></textarea>
          </div>
          <button type="submit" class="submit-btn">
            <i class="fas fa-paper-plane"></i> Kirim Konfirmasi
          </button>
        </form>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="footer-content">
          <p>&copy; 2024 Yunita & Mirsyad Wedding</p>
          <p>Terima kasih atas doa dan kehadiran Anda</p>
          <div class="social-links">
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-facebook"></i></a>
            <a href="#"><i class="fab fa-whatsapp"></i></a>
          </div>
        </div>
      </div>
    </footer>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
      <div class="bottom-nav-container">
        <a href="#home" class="bottom-nav-item" data-section="home">
          <div class="bottom-nav-icon">
            <i class="fas fa-home"></i>
          </div>
          <div class="bottom-nav-label">Home</div>
        </a>
        <a href="#couple" class="bottom-nav-item" data-section="couple">
          <div class="bottom-nav-icon">
            <i class="fas fa-heart"></i>
          </div>
          <div class="bottom-nav-label">Pasangan</div>
        </a>
        <a href="#events" class="bottom-nav-item" data-section="events">
          <div class="bottom-nav-icon">
            <i class="fas fa-calendar"></i>
          </div>
          <div class="bottom-nav-label">Acara</div>
        </a>
        <a href="#gallery" class="bottom-nav-item" data-section="gallery">
          <div class="bottom-nav-icon">
            <i class="fas fa-images"></i>
          </div>
          <div class="bottom-nav-label">Galeri</div>
        </a>
        <a href="#rsvp" class="bottom-nav-item" data-section="rsvp">
          <div class="bottom-nav-icon">
            <i class="fas fa-reply"></i>
          </div>
          <div class="bottom-nav-label">RSVP</div>
        </a>
      </div>
    </nav>

    <!-- Music Button -->
    <button class="music-btn" id="musicBtn" onclick="toggleMusic()">
      <i class="fas fa-music" id="musicIcon"></i>
    </button>

    <script>
      // Image loading detection and management
      function checkImageLoaded(element, imagePath) {
        const img = new Image();
        img.onload = function () {
          element.classList.add("image-loaded");
          element.classList.remove("loading-placeholder");
          const icon = element.querySelector("i");
          if (icon) icon.style.display = "none";
        };
        img.onerror = function () {
          console.log("Image failed to load:", imagePath);
        };
        img.src = imagePath;
      }

      document.addEventListener("DOMContentLoaded", function () {
        const bridePhoto = document.querySelector(".couple-photo.bride");
        const groomPhoto = document.querySelector(".couple-photo.groom");
        if (bridePhoto) checkImageLoaded(bridePhoto, "bride-photo.jpg");
        if (groomPhoto) checkImageLoaded(groomPhoto, "groom-photo.jpg");

        const galleryItems = document.querySelectorAll(".gallery-item");
        galleryItems.forEach((item, index) => {
          const imagePath = `gallery-${index + 1}.jpg`;
          checkImageLoaded(item, imagePath);
        });

        // Autoplay music on page load
        const music = document.getElementById("bg-music");
        const musicBtn = document.getElementById("musicBtn");
        const musicIcon = document.getElementById("musicIcon");

        if (music) {
          music
            .play()
            .then(() => {
              isPlaying = true;
              musicBtn?.classList.add("playing");
              if (musicIcon) musicIcon.className = "fas fa-pause";
            })
            .catch((err) => {
              console.warn("Autoplay blocked:", err);
            });
        }
      });

      // Smooth scroll
      document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
        anchor.addEventListener("click", function (e) {
          e.preventDefault();
          document.querySelector(this.getAttribute("href")).scrollIntoView({
            behavior: "smooth",
          });
        });
      });

      // Navigation scroll effect
      window.addEventListener("scroll", function () {
        const nav = document.getElementById("nav");
        if (nav && window.scrollY > 50) {
          nav.classList.add("scrolled");
        } else if (nav) {
          nav.classList.remove("scrolled");
        }
      });

      // Fade-in
      const observerOptions = {
        threshold: 0.1,
        rootMargin: "0px 0px -50px 0px",
      };
      const observer = new IntersectionObserver(function (entries) {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("visible");
          }
        });
      }, observerOptions);
      document.querySelectorAll(".fade-in").forEach((el) => {
        observer.observe(el);
      });

      // Countdown timer
      function updateCountdown() {
        const weddingDate = new Date("2024-09-15T08:00:00").getTime();
        const now = new Date().getTime();
        const distance = weddingDate - now;

        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor(
          (distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)
        );
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

        document.getElementById("days").textContent = days
          .toString()
          .padStart(2, "0");
        document.getElementById("hours").textContent = hours
          .toString()
          .padStart(2, "0");
        document.getElementById("minutes").textContent = minutes
          .toString()
          .padStart(2, "0");
        document.getElementById("seconds").textContent = seconds
          .toString()
          .padStart(2, "0");

        if (distance < 0) {
          document.getElementById("countdown").innerHTML =
            '<h3 style="color: white;">Hari Bahagia Telah Tiba!</h3>';
        }
      }

      setInterval(updateCountdown, 1000);
      updateCountdown();

      // RSVP Form
      document
        .getElementById("rsvpForm")
        ?.addEventListener("submit", function (e) {
          e.preventDefault();

          const formData = new FormData(this);
          const data = {
            name: formData.get("name"),
            attendance: formData.get("attendance"),
            guests: formData.get("guests"),
            message: formData.get("message"),
          };

          const submitBtn = this.querySelector(".submit-btn");
          const originalText = submitBtn.innerHTML;
          submitBtn.innerHTML =
            '<i class="fas fa-spinner fa-spin"></i> Mengirim...';
          submitBtn.disabled = true;

          setTimeout(() => {
            alert(`Terima kasih ${data.name}! Konfirmasi Anda telah diterima.`);
            this.reset();
            submitBtn.innerHTML = originalText;
            submitBtn.disabled = false;
          }, 2000);
        });

      // Music
      let isPlaying = false;
      const music = document.getElementById("bg-music");
      const musicBtn = document.getElementById("musicBtn");
      const musicIcon = document.getElementById("musicIcon");

      function toggleMusic() {
        if (!music) return;

        if (isPlaying) {
          music.pause();
          musicBtn?.classList.remove("playing");
          if (musicIcon) musicIcon.className = "fas fa-music";
          isPlaying = false;
        } else {
          music
            .play()
            .then(() => {
              musicBtn?.classList.add("playing");
              if (musicIcon) musicIcon.className = "fas fa-pause";
              isPlaying = true;
            })
            .catch((err) => {
              console.warn("Play blocked:", err);
            });
        }
      }

      // Tombol buka undangan
      document
        .getElementById("openInvitationBtn")
        ?.addEventListener("click", function () {
          const landingPage = document.getElementById("landing");
          if (landingPage) landingPage.style.display = "none";
          toggleMusic(); // play music
        });

      // Open Maps
      function openMaps(location) {
        const encodedLocation = encodeURIComponent(location);
        window.open(
          `https://www.google.com/maps/search/${encodedLocation}`,
          "_blank"
        );
      }

      // Gallery click anim
      document.querySelectorAll(".gallery-item").forEach((item) => {
        item.addEventListener("click", function () {
          this.style.transform = "scale(0.95)";
          setTimeout(() => {
            this.style.transform = "scale(1.05)";
            setTimeout(() => {
              this.style.transform = "scale(1)";
            }, 100);
          }, 100);
        });
      });

      // Bottom nav highlight
      function updateActiveNavItem() {
        const sections = document.querySelectorAll(
          ".section, .hero, .countdown"
        );
        const navItems = document.querySelectorAll(".bottom-nav-item");
        let currentSection = "home";

        sections.forEach((section) => {
          const rect = section.getBoundingClientRect();
          const sectionTop = rect.top;
          const sectionHeight = rect.height;

          if (
            sectionTop <= window.innerHeight / 2 &&
            sectionTop + sectionHeight > window.innerHeight / 2
          ) {
            currentSection = section.id || "home";
          }
        });

        navItems.forEach((item) => {
          const section = item.getAttribute("data-section");
          if (section === currentSection) {
            item.classList.add("active");
          } else {
            item.classList.remove("active");
          }
        });
      }

      window.addEventListener("scroll", updateActiveNavItem);

      document.querySelectorAll(".bottom-nav-item").forEach((item) => {
        item.addEventListener("click", function (e) {
          e.preventDefault();
          document.querySelectorAll(".bottom-nav-item").forEach((navItem) => {
            navItem.classList.remove("active");
          });
          this.classList.add("active");

          const targetId = this.getAttribute("href");
          const targetSection = document.querySelector(targetId);
          if (targetSection) {
            const offsetTop = targetSection.offsetTop - 100;
            window.scrollTo({ top: offsetTop, behavior: "smooth" });
          }
        });
      });

      // Preload
      function preloadImages() {
        const imagesToPreload = [
          "hero-bg.jpg",
          "bride-photo.jpg",
          "groom-photo.jpg",
          "gallery-1.jpg",
          "gallery-2.jpg",
          "gallery-3.jpg",
        ];
        imagesToPreload.forEach((src) => {
          const img = new Image();
          img.src = src;
        });
      }

      window.addEventListener("load", function () {
        updateActiveNavItem();
        preloadImages();
        document.body.classList.add("loaded");
        console.log("Wedding invitation loaded successfully!");
      });

      // Handle image errors
      window.addEventListener(
        "error",
        function (e) {
          if (e.target.tagName === "IMG") {
            console.log("Image failed to load:", e.target.src);
          }
        },
        true
      );

      // Keyboard nav
      document.addEventListener("keydown", function (e) {
        switch (e.key) {
          case "ArrowUp":
          case "ArrowDown":
            e.preventDefault();
            const currentActive = document.querySelector(
              ".bottom-nav-item.active"
            );
            if (currentActive) {
              const allItems = Array.from(
                document.querySelectorAll(".bottom-nav-item")
              );
              const currentIndex = allItems.indexOf(currentActive);
              let nextIndex =
                e.key === "ArrowUp"
                  ? currentIndex > 0
                    ? currentIndex - 1
                    : allItems.length - 1
                  : currentIndex < allItems.length - 1
                  ? currentIndex + 1
                  : 0;
              allItems[nextIndex].click();
            }
            break;
          case " ":
          case "Spacebar":
            if (e.target === document.body) {
              e.preventDefault();
              toggleMusic();
            }
            break;
        }
      });
    </script>
  </body>
</html>
